---
import { fetchHome, getFileUrl } from '@/lib/directus';
import { Image } from 'astro:assets';

const result = await fetchHome();
const fullName = result.full_name.replace(' ', '');
const imageUrl = await getFileUrl(result.image, {
  width: '225',
  height: '225',
});
const cvUrl = await getFileUrl(result.cv);
---

<section
  class='container mx-auto flex min-h-[100svh] flex-col justify-center space-y-6 text-center'
  id='home'
>
  <Image
    src={imageUrl}
    alt='tfkhdyt logo'
    width='225'
    height='225'
    class='mx-auto mb-4'
    loading='eager'
  />
  <h2 class='text-2xl font-extrabold md:text-5xl'>
    Hi, I'm <span class='whitespace-nowrap font-mono'
      ><span class='text-indigo-500'>{'<'}</span>{fullName}
      <span class='text-indigo-500'>{' />'}</span></span
    >
  </h2>
  <h3 class='mx-auto max-w-lg font-light text-gray-300 md:text-xl'>
    {result.description}
  </h3>
  <div class='pt-2 md:pt-4'>
    <a
      href={cvUrl}
      download
      class='mx-auto w-fit rounded bg-teal-300 px-4 py-2 font-semibold text-black transition hover:bg-teal-400 md:px-5 md:py-3'
    >
      View CV
    </a>
  </div>
</section>
